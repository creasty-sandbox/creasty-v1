(function(e){var d,h;var a=false,f;function c(j,i){if(j.indexOf("#")===0){e(j).clone(true).appendTo(h.empty()).show()}else{if(i){var k=e("<iframe />").attr({src:j,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});h.html(k)}else{h.load(j)}h.data("localEl",false)}}function b(k,j){var m=h.outerWidth(true),l={},i={};if(h.is(":visible")||a){return}a=true;switch(k){case"left":h.css({left:"auto",right:"-"+m+"px"});l["margin-left"]="-="+m;i.right="+="+m;break;default:h.css({left:"-"+m+"px",right:"auto"});l["margin-left"]="+="+m;i.left="+="+m;break}d.animate(l,j);h.show().animate(i,j,function(){a=false})}e.fn.pageslide=function(i){g();var j=e(this);j.bind("click tap",function(l){var m=e(this),k=e.extend({href:m.attr("href")},i);l.preventDefault();l.stopPropagation();if(h.is(":visible")&&m[0]==f){e.pageslide.close()}else{e.pageslide(k);f=m[0]}})};e.fn.pageslide.defaults={speed:200,direction:"right",modal:false,iframe:true,href:null};function g(){if(!d){d=e("body")}if(!h){h=e("#pageslide")}if(h.length==0){h=e('<div id="pageslide" />').css("display","none").appendTo(d)}else{return}h.bind("click tap",function(i){i.stopPropagation()});e(document).bind("click tap keyup",function(i){if(i.type=="keyup"&&i.keyCode!=27){return}if(h.is(":visible")&&!h.data("modal")){i.preventDefault();i.stopPropagation();e.pageslide.close()}})}e.pageslide=function(i){var j=e.extend({},e.fn.pageslide.defaults,i);if(h.is(":visible")&&h.data("direction")!=j.direction){e.pageslide.close(function(){c(j.href,j.iframe);b(j.direction,j.speed)})}else{c(j.href,j.iframe);if(h.is(":hidden")){b(j.direction,j.speed)}}h.data(j)};e.pageslide.close=function(n){var m=e("#pageslide"),l=m.outerWidth(true),j=m.data("speed"),k={},i={};if(m.is(":hidden")||a){return}a=true;switch(m.data("direction")){case"left":k["margin-left"]="+="+l;i.right="-="+l;break;default:k["margin-left"]="-="+l;i.left="-="+l;break}m.animate(i,j);d.animate(k,j,function(){m.hide();a=false;if(typeof n!="undefined"){n()}})}})(jQuery);